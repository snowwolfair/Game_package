# 救援信号

1. 玩家可以使用任务道具`救援信号弹`，使用后向所有没有在帮助中的玩家发送求援消息

2. 其他玩家可以通过点击求援消息中的`参与救援`传送到使用`救援信号弹`的玩家身边，同时展现自己的`参与救援消息`

   例如：

   ```
   "虾头太刀，参上"
   ```

   

## 救援设计：

### 1.触发救援信号

```json
{
    "criteria": {
        "help_sign": {
            "trigger":"minecraft:item_used_on_block",
            "conditions":{
                "item": {
                    "items":[
                        "minecraft:firework_rocket"
                    ],
                    "nbt":"{display:{Name:'{\"text\":\"救援信号弹\",\"color\":\"red\"}'}}"
                }

            } 
        }
    },
    "requirements": [
        ["help_sign"]
    ],

    "rewards": {
        "function": "help_msg:send_helpmsg"
    }
}
```

使用救援信号弹以后触发

### 2.接收救援信号

给所有未处于`in_help`和`doing_help`中的玩家发送救援信息

##### 问题：使用`tellraw`触发传送方法时，`@s`选择器仅能找到触发者，无法找到求援者（待解决）

不然在多人求救的时候，`@p`选择器会混乱，而且当玩家处于不同维度时并不会被触发

现处理办法：同一时间只能有一个信号弹生效，冷却时间40分钟。

### 3.参加救援

给所有参加救援的玩家展示用户设定的自定义出场台词

### 4.设定台词

问题同上，`@p`选择器可能造成混乱，并且不知道在哪里能保存这个台词

现处理办法：存储在命令中，预留10个空位

```
参加救援，救援就像游戏里的房间一样，发送救援信号的玩家是房主，参加救援的玩家是参与者，参加救援信号的玩家的登场台词只会广播在本房间内，参加救援的玩家会被传送到房主身边.
注意：确保多个救援信号发出的时候，不会错乱。处在房间中的玩家无法接收其他房间房主的救援信号，参加救援的玩家无法使用救援信号道具。房间持续40分钟自动解散，道具冷却时间60分钟
```

